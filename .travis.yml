branches:
  only:
    - "master"

language: python

cache: pip

dist: xenial  # required for python3.7

python:
    - "3.6"
    - "3.7"

install:
    - pip install "pip<22"
    - pip install .[dev,docs,examples]

script:
    - pip freeze
    - pytest
    - flake8 deepdow
    - flake8 tests
    - pydocstyle deepdow
    - sphinx-build -b doctest docs/ temp_doctest

after_success:
    - codecov
